<div class="tool-bar">
  <div>
    <nz-input-group nzSearch [nzAddOnAfter]="suffixIconButton" nzSize="small">
      <input type="text" nz-input placeholder="关键字" [(ngModel)]="keyword" (keyup.enter)="refresh()" />
    </nz-input-group>
    <ng-template #suffixIconButton>
      <button nz-button nzType="primary" nzSize="small" nzSearch (click)="refresh()">
        <i nz-icon nzType="search"></i>
      </button>
    </ng-template>
  </div>
  <div>
    <button type="button" nz-button nzType="default" nzSize="small" (click)="add($event)">
      <i nz-icon nzType="plus" nzTheme="outline"></i>
      新增
    </button>
  </div>
  <div>
    <button type="button" nz-button nzType="default" nzSize="small" (click)="delete($event)">
      <i nz-icon nzType="delete" nzTheme="outline"></i>
      删除
    </button>
  </div>
  <div>
    <button type="button" nz-button nzType="default" nzSize="small" (click)="refresh()">
      <i nz-icon nzType="sync" nzTheme="outline"></i>
      刷新
    </button>
  </div>
</div>
<div nz-row nzGutter="24">
  <div nz-col nzMd="24" nzLg="7">
    <nz-card [nzBordered]="false" nzSize="small" [nzTitle]="titleTpl">
      <ng-template #titleTpl>
        <a (click)="all()">
          所有机构>>
        </a>
      </ng-template>

      <nz-tree
        [nzData]="nodes"
        nzExpandAll
        nzBlockNode
        (nzClick)="edit($event)"
        class="mhb"
        [nzTreeTemplate]="nzTreeTemplate"
      >
      </nz-tree>
      <ng-template #nzTreeTemplate let-node>
        <span class="e_tree-node" [ngClass]="{ 'e_tree-node-selected': node.isSelected }">
          <i nz-icon nzType="file" class="mr4"></i>
          <span class="file-name">{{ node?.origin?.no }}</span>
          <span class="file-desc"> {{ node?.origin?.name }}</span>
        </span>
      </ng-template>
    </nz-card>
  </div>
  <div nz-col nzMd="24" nzLg="17">
    <nz-card [nzBordered]="false" nzSize="small">
      <form nz-form #f="ngForm" se-container size="compact" gutter="24" class="single-fwh fmch">
        <se label="上级机构" col="1">
          <nz-tree-select
            style="width: 250px"
            [nzNodes]="selectNodes"
            [(ngModel)]="org.parentId"
            name="org_ParentId"
            nzShowSearch
            nzPlaceHolder="请选择"
          >
          </nz-tree-select>
        </se>

        <se label="机构名称" required col="1">
          <input type="text" nz-input [(ngModel)]="org.name" name="org_name" required />
        </se>
        <se label="状态" col="1">
          <nz-select style="width: 120px;" [(ngModel)]="org.status" name="org_status" nzPlaceHolder="请选择 ">
            <nz-option [nzValue]="1" [nzLabel]="'正常'"></nz-option>
            <nz-option [nzValue]="2" [nzLabel]="'异常'"></nz-option>
          </nz-select>
        </se>
        <se col="1">
          <button nz-button nzType="primary" [disabled]="f.invalid" (click)="save($event)">保存</button>
          <button nz-button nzType="default" (click)="reset()">重置</button>
        </se>
      </form>
    </nz-card>
  </div>
</div>
